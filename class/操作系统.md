# 第一章 导论

## 操作系统介绍：

### 操作系统定义：
1.控制管理计算机的软硬件资源
2合理调度各类资源，提高系统效率和吞吐量
3.方便用户使用的系统软件（系统硬件上的第一层软件）

### 操作系统的目标：
方便性，有效性，可扩充性，开放性

### 操作系统的基本特征：
并发，共享，虚拟，异步（不确定性）

### 操作系统的作用:
1. 提供用户与计算机硬件系统之间的接口
2. 计算机系统资源的管理者  
    计算机有5大部分组成：输入设备，输出设备，储存器，运算器，控制器。

3. 实现了对计算机资源的抽象
    操作系统的层次结构：
    - 5操作员
    - 4用户程序
    - 3输入输出管理
    - 2操作员-进程间通信
    - 1存储管理
    - 0处理器分配和多道程序
## 操作系统发展历程
### 无操作系统，人工操作
机器语言，纸带或卡片
特点：
- 用户独占全机，资源利用率低
- cpu等待用户
### 单道批处理系统  FMS
汇编语言 FORTRAN语言
利用磁带把若干个作业分类编成作业执行序列，每个序列由一个专门的监督程序自动依次处理
缺点：
CPU和I/O设备使用忙闲不均（取决于当前作业的特性）  
- 对计算为主的作业，外设空闲；
- 对I/O为主的作业，CPU空闲；
>60年代初，发展了通道技术和中断技术，使得监督程序在负责作业运行的同时提供I/O控制功能
>通道：用于控制I/O设备与内存间的数据传输。启动后可独立于CPU运行，实现CPU与I/O的并行。
> - 道有专用的I/O处理器，可与CPU并行工作
> - 可实现 I/O联机处理  
> 
>中断：CPU在收到外部中断信号后，停止原来工作，转去处理该中断事件，完毕后回到原来断点继续工作。
>    - 中断处理过程：中断请求，中断响应，中断点（暂停当前任务并保存现场），中断处理例程，中断返回(恢复中断点的现场并继续原有任务)
>    - 处理算术溢出和非法操作码，死循环（利用时钟中断进行超时限定）  

**监督程序发展为执行系统(executive system)，常驻内存**
### 多道程序 IBM1401/7094 到IBM360
- 多道：多个作业在内存中
  - 宏观上并行：都处于运行状态，但都未运行完
  - 微观上串行：各作业交替使用cpu
- 当作业需要I/O处理时，cpu转而执行另一个作业
    - 优点：
    资源利用率高，
    作业吞吐量大;
    - 缺点：
    用户交互性差
    作业平均周转时间长（针对短作业来说）
    对外围设备的要求：
>多道批处理系统对外部设备的要求
>SPOOLING技术（Simultaneous Peripheral Operation On Line）假脱机技术，又称外部设备联机并行操作
>1.脱机技术——脱离主机的控制进行输入/输出操作
> 利用外围机操作I/O
>2.假脱机技术——用软件的方式模拟脱机技术，缓解设备与CPU速度的矛盾。假脱机技术由输入井和输出井、输入进程和输出进程以及输入缓冲区和输出缓冲区组成。
>3.实现SPOOLing技术需要多道程序技术的支持
输入进程和输出进程需要和用户进程并发执行才可以模拟脱机技术
>4. 假脱机技术可将独占是设备改造成共享设备
将一台物理设备虚拟成逻辑上的多台设备，实现多用户共享使用
###	分时系统
>程序员对快速响应的渴望导致了分时技术的出现，这是多道程序的一个变种，每个用户都有一个在线终端

“分时” 是指多个用户分享使用同一台计算机。多个程序分时共享硬件和软件资源。
- 多个用户分时：单个用户使用计算机的效率低，因而允许多个应用程序同时在内存中，分别服务于不同的用户。有用户输入时由CPU执行，处理完一次用户输入后程序暂停，等待下一次用户输入－－走走停停
- 前台和后台程序(foreground & background)分时：后台程序不占用终端输入输出，不与用户交互－－现在的图形用户界面(GUI)，除当前交互的程序(输入焦点)之外，其他程序均作为后台
- 通常按时间片(time slice)分配：各个程序在CPU上执行的轮换时间

特点：
1. 交互性：用户通过终端自己操作。
2. 多路性：多个用户同时使用。
3. 独立性：对每个用户而言好象独占主机。
4. 及时性：用户请求较短时间内得到满足。

### 微机操作系统
- CP/M（微型计算机控制程序）intel8080
- DOS（磁盘操作系统）intel 80286
- GUI  （图形用户界面） Macintosh Windows  Linux
- 网络操作系统和分布式操作系统
>分布式系统和网络系统，用户使用的都是通过计算机网络连接起来的整个系统网络， 
他们的区别在于，用户看到的是什么： 
网络系统，用户实实在在管理整个网络的每个计算机资源， 
分布式系统自动管理计算机资源，用户使用起来和单个计算机一样方便，但是在必要的时候效率会很高，因为后台会有资源的协调处理。
计算机术语里的透明性和平时我们说的透明性语义是完全相反的。在计算机术语里，某过程对用户是透明的，意思是用户看不见，即黑盒。
		
## 操作系统类型
### 实时操作系统：
把时间作为一个关键参数。必须符合严格的时间界限。 
1. 硬实时系统(hard real-time system)-动作确定必须在确定的时刻(或者在一个确定的范围内)发生。 
2. 软实时系统(soft real-time system)-偶尔错过时间界限是可以接受的。如数字音频或者多媒体系统
### 嵌入式操作系统：
1. 嵌入式系统运行于控制设备的计算机上，而这些计算机通常并不被认为是计算机，例如电视机、微波炉和移动电话。 
2. 它们通常具有实时系统的特征，不过同时由于受到尺寸、内存以及能量限制而使得它们更为特殊。 
3. 这种操作系统的例子有IOS和Android。 

特点：
    低成本，高可靠性，占有资源少

## 系统调用
- 操作系统和用户程序之间的接口是由一组操作系统提供的系统调用(System Call)来定义的
- 系统调用是操作系统提供给编程人员的唯一接口。通过系统调用使用操作系统内核提供的各种功能
- 系统调用的执行不同于用户程序的执行。系统调用的执行是在核心态下，而用户程序则是在用户态下
![20220502180734](https://raw.githubusercontent.com/GWrety/Ima/master/images/20220502180734.png)
### 系统调用分类
1. 设备管理：该类系统调用被用来请求和释放有关设备、以及启动设备操作等。
2. 文件管理：包括对文件的读、写、创建和删除等。
3. 进程控制：进程是一个在功能上独立的程序的一次执行过程。进程控制的有关系统调用包括进程创建、进程执行、进程撤消、执行等待和执行优先级控制等。
4. 进程通信：该类系统调用被用在进程之间传递消息或信号。
5. 存储管理：包括调查作业占据内存区的大小、获取作业占据内存区的始址等。
6. 线程管理：包括线程的创建、调度、执行、撤销等。



